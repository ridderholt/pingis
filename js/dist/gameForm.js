!function e(t,s,a){function r(o,i){if(!s[o]){if(!t[o]){var l="function"==typeof require&&require;if(!i&&l)return l(o,!0);if(n)return n(o,!0);throw new Error("Cannot find module '"+o+"'")}var c=s[o]={exports:{}};t[o][0].call(c.exports,function(e){var s=t[o][1][e];return r(s?s:e)},c,c.exports,e,t,s,a)}return s[o].exports}for(var n="function"==typeof require&&require,o=0;o<a.length;o++)r(a[o]);return r}({1:[function(e,t){"use strict";var s=e("./selectbox"),a=e("./messageModel"),r=window.$,n=React.createClass({displayName:"gameForm",getInitialState:function(){return{players:[],winner:"",looser:"",saving:!1,message:{type:"bg-success",text:"Matchen har sparats",show:!1}}},validatePlayers:function(){return this.state.winner===this.state.looser?(this.setState({message:{type:"bg-danger",text:"Välj två olika spelare",show:!0}}),!1):(this.setState({message:{show:!1}}),!0)},onWinnerSelected:function(e){this.setState({winner:e.target.value},function(){this.validatePlayers()})},onLooserSelected:function(e){this.setState({looser:e.target.value},function(){this.validatePlayers()})},onSubmit:function(e){if(e.preventDefault(),!this.state.saving){var t=r(".ladda-button").ladda();t.ladda("start"),this.setState({saving:!0});var s=this;r.ajax({url:"/api/game",type:"POST",contentType:"application/json",data:JSON.stringify({winner:this.state.winner,looser:this.state.looser}),success:function(){t.ladda("stop"),s.setState({message:{type:"bg-success",text:"Matchen har sparats",show:!0,saving:!1}})}})}},componentDidMount:function(){r.getJSON(this.props.source,function(e){e.splice(0,0,{value:"",text:"- Välj spelare -"}),this.setState({players:e})}.bind(this))},render:function(){return React.DOM.form({onSubmit:this.onSubmit,className:"form-horizontal",role:"form"},a({show:this.state.message.show,messageType:this.state.message.type,message:this.state.message.text}),React.DOM.div({className:"form-group has-feedback"},React.DOM.label({htmlFor:"winner",className:"col-sm-2 control-label"},"Vinnare"),React.DOM.div({className:"col-sm-10"},s({selectedValue:this.state.winner,onChange:this.onWinnerSelected,items:this.state.players}))),React.DOM.div({className:"form-group"},React.DOM.label({htmlFor:"looser",className:"col-sm-2 control-label"},"Förlorare"),React.DOM.div({className:"col-sm-10"},s({selectedValue:this.state.looser,onChange:this.onLooserSelected,items:this.state.players}))),React.DOM.div({className:"form-group"},React.DOM.div({className:"col-sm-offset-2 col-sm-10"},React.DOM.button({type:"submit","data-color":"green","data-size":"s","data-style":"expand-right",className:"ladda-button"},React.DOM.span({className:"ladda-label"},"Spara")))))}});t.exports=n},{"./messageModel":2,"./selectbox":4}],2:[function(e,t){"use strict";t.exports=React.createClass({displayName:"exports",getInitialState:function(){return{show:!1,messageType:"bg-primary",message:""}},render:function(){var e=this.props.messageType;return this.props.show!==!0&&(e+=" hidden"),React.DOM.p({className:e},this.props.message)}})},{}],3:[function(e,t){"use strict";function s(){this.key=function(){return 1e4*Math.random()}}t.exports=new s},{}],4:[function(e,t){"use strict";var s=e("./react-key"),a=React.createClass({displayName:"selectbox",render:function(){var e=this,t=this.props.items.map(function(t){var a=t.value===e.props.selectedValue;return React.DOM.option({key:s.key(),selected:a,defaultValue:e.props.selectedValue,value:t.value},t.text)});return React.DOM.select({required:!0,onChange:this.props.onChange,className:"form-control"},t)}});t.exports=a},{"./react-key":3}]},{},[1]);